{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to twampy","text":"<p>twampy is a Python implementation of the Two-Way Active Measurement Protocol (TWAMP and TWAMP light) as defined in RFC 5357 and the Simple Two-Way Active Measurement Protocol (STAMP) as defined in RFC 8762.</p> <p>This tool was developed to validate Nokia SR OS and SR Linux TWAMP/STAMP implementations and provides comprehensive network latency measurement capabilities.</p>"},{"location":"#overview","title":"Overview","text":"<p>twampy is a network measurement tool that enables accurate measurement of:</p> <ul> <li>Latency - Round-trip delay between network endpoints</li> <li>Jitter - Packet delay variation (calculated per RFC 1889)</li> <li>Packet Loss - Percentage of packets lost in transit</li> </ul>"},{"location":"#features","title":"Features","text":"<ul> <li>\u2705 Multiple Operation Modes - Controller, Control Client, Session Sender, Reflector</li> <li>\u2705 Dual Stack Support - Both IPv4 and IPv6</li> <li>\u2705 QoS Control - DSCP/TOS field configuration</li> <li>\u2705 Flexible Packet Sizing - Custom padding, jumbo frames, IMIX traffic</li> <li>\u2705 Fragmentation Control - DF (Don't Fragment) flag support</li> <li>\u2705 Standards Compliant - Follows RFC 5357, RFC 4656, RFC 1889</li> </ul>"},{"location":"#modes-of-operation","title":"Modes of Operation","text":""},{"location":"#twamp-controller","title":"TWAMP Controller","text":"<p>Combined Control Client and Session Sender that establishes a control connection to a TWAMP server and initiates test sessions.</p>"},{"location":"#twamp-control-client","title":"TWAMP Control Client","text":"<p>Establishes control sessions with TWAMP servers to run TWAMP light test sessions.</p>"},{"location":"#twamp-test-session-sender-twamp-light","title":"TWAMP Test Session Sender (TWAMP light)","text":"<p>Sends test packets directly to a reflector without control session negotiation.</p>"},{"location":"#twamp-light-reflector","title":"TWAMP light Reflector","text":"<p>Receives test packets and reflects them back to the sender with timestamps.</p>"},{"location":"#protocol-support","title":"Protocol Support","text":"<ul> <li>TWAMP (RFC 5357) - Two-Way Active Measurement Protocol</li> <li>TWAMP light - Simplified variant without control channel</li> <li>STAMP (RFC 8762) - Simple Two-Way Active Measurement Protocol</li> <li>STAMP Extensions (RFC 8972) - Optional extensions including Session Identifier (SSID)</li> <li>Unauthenticated mode - Currently supported mode</li> <li>IPv4 and IPv6 - Full dual-stack support</li> </ul>"},{"location":"#use-cases","title":"Use Cases","text":"<ul> <li>Validate TWAMP/STAMP implementations on network devices (Nokia SR OS, SR Linux)</li> <li>Measure network latency and jitter</li> <li>Test Quality of Service (QoS) configurations</li> <li>Verify network SLAs</li> <li>Troubleshoot network performance issues</li> <li>Generate traffic with specific characteristics</li> </ul>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Check out the Installation Guide to get started, then see the Usage Guide for examples.</p>"},{"location":"#limitations","title":"Limitations","text":"<p>Current Limitations</p> <ul> <li>Software timestamping only - No hardware timestamping support (less precise)</li> <li>Unauthenticated mode only - Authenticated/encrypted modes not yet implemented</li> <li>DF flag support - Limited to Linux and Windows (not supported on macOS/FreeBSD)</li> </ul>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the BSD-3-Clause license. See LICENSE for details.</p>"},{"location":"#related-projects","title":"Related Projects","text":"<ul> <li>TWAMP RFC 5357 - TWAMP protocol specification</li> <li>STAMP RFC 8762 - STAMP protocol specification</li> <li>STAMP Extensions RFC 8972 - STAMP optional extensions (Session ID)</li> <li>RFC 4656 - One-way Active Measurement Protocol (OWAMP)</li> <li>RFC 1889 - RTP jitter calculation</li> </ul>"},{"location":"reference/dscp-table/","title":"DSCP Table Reference","text":"<p>Differentiated Services Code Point (DSCP) values for Quality of Service (QoS) marking.</p>"},{"location":"reference/dscp-table/#quick-reference","title":"Quick Reference","text":"<p>To display the DSCP table from the command line:</p> <pre><code>twampy dscptable\n</code></pre>"},{"location":"reference/dscp-table/#dscp-values","title":"DSCP Values","text":"<p>DSCP is a 6-bit field in the IP header used for packet classification and QoS.</p>"},{"location":"reference/dscp-table/#class-selector-cs-phbs","title":"Class Selector (CS) PHBs","text":"<p>Class Selector PHBs provide backward compatibility with IP Precedence:</p> DSCP Binary Decimal Name Description Use Case CS0 000000 0 Default Best Effort Regular traffic CS1 001000 8 Scavenger Lower than best effort Bulk/background CS2 010000 16 OAM Operations, Administration, Management Network management CS3 011000 24 Broadcast Video Broadcast/streaming Video streaming CS4 100000 32 Real-Time Interactive Real-time apps Video conferencing CS5 101000 40 Signaling Signaling traffic VoIP signaling CS6 110000 48 Network Control Network control traffic Routing protocols CS7 111000 56 Reserved Reserved for future use Reserved"},{"location":"reference/dscp-table/#assured-forwarding-af-phbs","title":"Assured Forwarding (AF) PHBs","text":"<p>AF provides reliable delivery with different drop precedences:</p> DSCP Binary Decimal Name Class Drop Prob Use Case AF11 001010 10 AF11 1 Low High-priority data AF12 001100 12 AF12 1 Medium High-priority data AF13 001110 14 AF13 1 High High-priority data AF21 010010 18 AF21 2 Low Medium-priority data AF22 010100 20 AF22 2 Medium Medium-priority data AF23 010110 22 AF23 2 High Medium-priority data AF31 011010 26 AF31 3 Low Multimedia streaming AF32 011100 28 AF32 3 Medium Multimedia streaming AF33 011110 30 AF33 3 High Multimedia streaming AF41 100010 34 AF41 4 Low Multimedia conferencing AF42 100100 36 AF42 4 Medium Multimedia conferencing AF43 100110 38 AF43 4 High Multimedia conferencing"},{"location":"reference/dscp-table/#expedited-forwarding-ef-phb","title":"Expedited Forwarding (EF) PHB","text":"<p>EF provides low-loss, low-latency, low-jitter service:</p> DSCP Binary Decimal Name Description Use Case EF 101110 46 Expedited Forwarding Premium service VoIP, real-time"},{"location":"reference/dscp-table/#voice-admit-va-phb","title":"Voice Admit (VA) PHB","text":"DSCP Binary Decimal Name Description Use Case VA 101100 44 Voice Admit Call admission control VoIP CAC"},{"location":"reference/dscp-table/#common-dscp-mappings","title":"Common DSCP Mappings","text":""},{"location":"reference/dscp-table/#by-traffic-type","title":"By Traffic Type","text":"Traffic Type Recommended DSCP Decimal Description Voice (VoIP) EF 46 Low latency, guaranteed Video Conferencing AF41 34 Interactive video Streaming Video AF31 26 One-way video Signaling (SIP/H.323) CS5 40 Call control Network Management CS2 16 SNMP, NetFlow Routing Protocols CS6 48 OSPF, BGP Transactional Data AF21 18 Business-critical Bulk Data CS1 8 FTP, backup Best Effort CS0/DF 0 Default traffic"},{"location":"reference/dscp-table/#by-priority-level","title":"By Priority Level","text":"Priority DSCP Decimal Queue Description Highest EF 46 P1 Real-time voice High AF41 34 P2 Video, interactive Medium AF31 26 P3 Streaming media Normal AF21 18 P4 Business apps Low CS1 8 P5 Background/bulk Default CS0 0 P6 Best effort"},{"location":"reference/dscp-table/#usage-with-twampy","title":"Usage with twampy","text":""},{"location":"reference/dscp-table/#set-dscp-for-test-traffic","title":"Set DSCP for Test Traffic","text":"<pre><code># Voice traffic (EF)\ntwampy sender 192.168.1.100 --dscp ef\n\n# Video conferencing (AF41)\ntwampy sender 192.168.1.100 --dscp af41\n\n# Best effort (default)\ntwampy sender 192.168.1.100 --dscp be\n</code></pre>"},{"location":"reference/dscp-table/#test-different-qos-classes","title":"Test Different QoS Classes","text":"<pre><code># Priority 1: Voice\ntwampy sender 192.168.1.100 --dscp ef --count 1000 --interval 20\n\n# Priority 2: Video\ntwampy sender 192.168.1.100 --dscp af41 --count 1000 --interval 33\n\n# Priority 3: Data\ntwampy sender 192.168.1.100 --dscp af21 --count 1000 --interval 100\n</code></pre>"},{"location":"reference/dscp-table/#dscp-to-tos-conversion","title":"DSCP to TOS Conversion","text":"<p>DSCP occupies the upper 6 bits of the TOS byte:</p> <pre><code>TOS = DSCP &lt;&lt; 2\n</code></pre> DSCP DSCP (Dec) TOS (Dec) TOS (Hex) EF 46 184 0xB8 AF41 34 136 0x88 AF31 26 104 0x68 AF21 18 72 0x48 CS5 40 160 0xA0 CS0 0 0 0x00"},{"location":"reference/dscp-table/#using-tos-value-directly","title":"Using TOS Value Directly","text":"<pre><code># Equivalent to --dscp 46\ntwampy sender 192.168.1.100 --tos 184\n\n# Equivalent to --dscp 34\ntwampy sender 192.168.1.100 --tos 136\n</code></pre>"},{"location":"reference/dscp-table/#phb-descriptions","title":"PHB Descriptions","text":""},{"location":"reference/dscp-table/#assured-forwarding-af","title":"Assured Forwarding (AF)","text":"<p>AF provides assurance of delivery under prescribed conditions. Format: <code>AFxy</code></p> <ul> <li>x (1-4): AF class (traffic category)</li> <li>y (1-3): Drop precedence (1=low, 2=medium, 3=high)</li> </ul> <p>Example: AF41 = Class 4, Low drop precedence</p>"},{"location":"reference/dscp-table/#expedited-forwarding-ef","title":"Expedited Forwarding (EF)","text":"<p>EF provides: - Low delay - Low jitter - Low loss - Assured bandwidth</p> <p>Best for: VoIP, real-time gaming</p>"},{"location":"reference/dscp-table/#class-selector-cs","title":"Class Selector (CS)","text":"<p>CS provides 8 classes based on IP Precedence: - CS0 (0): Default/Best Effort - CS1 (8): Scavenger/Bulk - CS2-CS7: Increasing priority</p>"},{"location":"reference/dscp-table/#platform-considerations","title":"Platform Considerations","text":""},{"location":"reference/dscp-table/#windows","title":"Windows","text":"<p>Requires registry modification to enable user-space TOS/DSCP setting:</p> <pre><code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\TcpIp\\Parameters\nDisableUserTOSSetting = 0x00000000\n</code></pre> <p>See Installation Guide for details.</p>"},{"location":"reference/dscp-table/#linux","title":"Linux","text":"<p>Full DSCP/TOS support without special configuration.</p>"},{"location":"reference/dscp-table/#macos-freebsd","title":"macOS / FreeBSD","text":"<p>DSCP/TOS marking supported, but may require elevated privileges.</p>"},{"location":"reference/dscp-table/#testing-qos-configuration","title":"Testing QoS Configuration","text":""},{"location":"reference/dscp-table/#verify-dscp-preservation","title":"Verify DSCP Preservation","text":"<p>Test that network devices preserve DSCP markings:</p> <pre><code># Send with DSCP EF\ntwampy sender 192.168.1.100 --dscp ef --count 100\n\n# Capture on receiver and verify DSCP value\n</code></pre>"},{"location":"reference/dscp-table/#compare-treatment-across-classes","title":"Compare Treatment Across Classes","text":"<p>Run tests with different DSCP values and compare results:</p> <pre><code># EF (should get priority treatment)\ntwampy sender 192.168.1.100 --dscp ef &gt; ef-results.txt\n\n# Best Effort (normal treatment)\ntwampy sender 192.168.1.100 --dscp be &gt; be-results.txt\n\n# Compare latency/loss between classes\n</code></pre>"},{"location":"reference/dscp-table/#references","title":"References","text":"<ul> <li>RFC 2474 - Definition of the Differentiated Services Field</li> <li>RFC 2475 - An Architecture for Differentiated Services</li> <li>RFC 3246 - An Expedited Forwarding PHB</li> <li>RFC 2597 - Assured Forwarding PHB Group</li> <li>Configuration Guide - Parameter details</li> <li>Usage Guide - Practical examples</li> </ul>"},{"location":"reference/error-codes/","title":"Error Codes","text":"<p>TWAMP error codes as defined in RFC 4656 (OWAMP) and used in RFC 5357 (TWAMP).</p>"},{"location":"reference/error-codes/#error-code-reference","title":"Error Code Reference","text":"Code Name Description 0 OK Success - No error occurred 1 Failure Failure, reason unspecified (catch-all) 2 Internal Error Internal error occurred in the implementation 3 Not Supported Some aspect of the request is not supported 4 Permanent Resource Limitation Cannot perform request due to permanent resource limitations 5 Temporary Resource Limitation Cannot perform request due to temporary resource limitations"},{"location":"reference/error-codes/#error-code-details","title":"Error Code Details","text":""},{"location":"reference/error-codes/#code-0-ok","title":"Code 0: OK","text":"<p>Meaning: The operation completed successfully.</p> <p>Action: None required. This indicates normal operation.</p> <p>Example scenarios: - Connection established successfully - Test session started successfully - All packets transmitted and received</p>"},{"location":"reference/error-codes/#code-1-failure-unspecified","title":"Code 1: Failure (Unspecified)","text":"<p>Meaning: A general failure occurred, but the specific reason is not identified or does not fit other categories.</p> <p>Possible causes: - Network connectivity issues - Unexpected protocol violations - General communication errors</p> <p>Troubleshooting: 1. Check network connectivity between endpoints 2. Verify firewall rules allow TWAMP traffic 3. Check logs for specific error messages 4. Verify both endpoints are using compatible TWAMP versions</p>"},{"location":"reference/error-codes/#code-2-internal-error","title":"Code 2: Internal Error","text":"<p>Meaning: An internal error occurred within the TWAMP implementation.</p> <p>Possible causes: - Software bug - Memory allocation failure - System resource exhaustion - Unexpected exception</p> <p>Troubleshooting: 1. Check system logs for errors 2. Verify sufficient system resources (memory, CPU) 3. Try restarting the TWAMP process 4. Report bug if reproducible</p>"},{"location":"reference/error-codes/#code-3-not-supported","title":"Code 3: Not Supported","text":"<p>Meaning: The requested feature or parameter is not supported by this implementation.</p> <p>Possible causes: - Requesting authenticated mode (not implemented in twampy) - Requesting encrypted mode (not implemented) - Using unsupported protocol features - Incompatible protocol version</p> <p>Troubleshooting: 1. Verify you're using unauthenticated mode 2. Check that both endpoints support the requested features 3. Review RFC 5357 for optional vs required features 4. Use compatible protocol parameters</p> <p>twampy specific limitations: - Only unauthenticated mode is supported - Authenticated and encrypted modes return this error - Some RFC 5938 and RFC 6038 features not supported</p>"},{"location":"reference/error-codes/#code-4-permanent-resource-limitation","title":"Code 4: Permanent Resource Limitation","text":"<p>Meaning: The request cannot be performed due to permanent resource constraints.</p> <p>Possible causes: - Maximum number of concurrent sessions reached - Insufficient port range available - Hardware limitations - License restrictions (commercial implementations)</p> <p>Troubleshooting: 1. Reduce number of concurrent sessions 2. Check system configuration limits 3. Verify no port conflicts exist 4. Review system resource allocation</p>"},{"location":"reference/error-codes/#code-5-temporary-resource-limitation","title":"Code 5: Temporary Resource Limitation","text":"<p>Meaning: The request cannot be performed right now due to temporary resource constraints, but may succeed if retried later.</p> <p>Possible causes: - Temporary memory shortage - CPU overload - Network buffer exhaustion - Rate limiting</p> <p>Troubleshooting: 1. Wait and retry the operation 2. Reduce packet rate or session count 3. Check system load (CPU, memory, network) 4. Implement exponential backoff for retries</p>"},{"location":"reference/error-codes/#error-handling-best-practices","title":"Error Handling Best Practices","text":""},{"location":"reference/error-codes/#for-users","title":"For Users","text":"<ol> <li>Check error code: Identify the specific error code returned</li> <li>Review logs: Enable verbose or debug logging for details</li> <li>Verify configuration: Ensure parameters are within supported ranges</li> <li>Test connectivity: Verify network path to remote endpoint</li> <li>Retry appropriately: For code 5, retry after a delay</li> </ol>"},{"location":"reference/error-codes/#for-developers","title":"For Developers","text":"<ol> <li>Log error details: Include error code and context in logs</li> <li>Provide meaningful messages: Translate error codes to user-friendly text</li> <li>Implement retries: Automatically retry on code 5 errors</li> <li>Validate inputs: Check parameters before sending requests</li> <li>Handle gracefully: Don't crash on protocol errors</li> </ol>"},{"location":"reference/error-codes/#example-error-scenarios","title":"Example Error Scenarios","text":""},{"location":"reference/error-codes/#scenario-1-connection-refused","title":"Scenario 1: Connection Refused","text":"<pre><code>$ twampy controller 192.168.1.100\nError: Connection refused (Code 1)\n</code></pre> <p>Cause: No TWAMP server listening on the target</p> <p>Solution: <pre><code># Verify server is running\nnetstat -ulnp | grep 862\n\n# Start responder if needed\ntwampy responder :862\n</code></pre></p>"},{"location":"reference/error-codes/#scenario-2-authenticated-mode-not-supported","title":"Scenario 2: Authenticated Mode Not Supported","text":"<pre><code>$ twampy controller 192.168.1.100\nError: Authenticated mode not supported (Code 3)\n</code></pre> <p>Cause: Server requires authentication, but twampy only supports unauthenticated mode</p> <p>Solution: Configure server for unauthenticated mode or use a different client</p>"},{"location":"reference/error-codes/#scenario-3-too-many-sessions","title":"Scenario 3: Too Many Sessions","text":"<pre><code>$ twampy controller 192.168.1.100\nError: Maximum sessions reached (Code 4)\n</code></pre> <p>Cause: Server has reached its session limit</p> <p>Solution: Wait for existing sessions to complete or increase server session limit</p>"},{"location":"reference/error-codes/#scenario-4-temporary-overload","title":"Scenario 4: Temporary Overload","text":"<pre><code>$ twampy sender 192.168.1.100\nError: Temporary resource limitation (Code 5)\n</code></pre> <p>Cause: Server is temporarily overloaded</p> <p>Solution: Retry after a brief delay</p>"},{"location":"reference/error-codes/#related-references","title":"Related References","text":"<ul> <li>RFC 4656 - OWAMP Protocol - Error code definitions</li> <li>RFC 5357 - TWAMP Protocol - TWAMP-specific usage</li> <li>Usage Guide - Practical usage examples</li> <li>Configuration Guide - Parameter reference</li> </ul>"},{"location":"user-guide/configuration/","title":"Configuration","text":"<p>This guide provides detailed information about twampy configuration options and parameters.</p>"},{"location":"user-guide/configuration/#command-line-options","title":"Command-Line Options","text":""},{"location":"user-guide/configuration/#global-options","title":"Global Options","text":"<p>Available for all commands:</p> Option Description Default <code>--version, -v</code> Show version and exit - <code>--help, -h</code> Show help message and exit -"},{"location":"user-guide/configuration/#logging-options","title":"Logging Options","text":"<p>Control logging verbosity and destination:</p> Option Description Default <code>--quiet, -q</code> Disable logging output <code>False</code> <code>--verbose, -v</code> Enable verbose logging <code>False</code> <code>--debug, -d</code> Enable debug logging (most detailed) <code>False</code> <code>--logfile &lt;filename&gt;, -l &lt;filename&gt;</code> Write logs to file instead of stdout <code>stdout</code> <p>Example: <pre><code>twampy sender 192.168.1.100 --debug --logfile debug.log\n</code></pre></p>"},{"location":"user-guide/configuration/#ip-socket-options","title":"IP Socket Options","text":"<p>Configure IP-level parameters:</p>"},{"location":"user-guide/configuration/#dscp-differentiated-services-code-point","title":"DSCP (Differentiated Services Code Point)","text":"<pre><code>--dscp &lt;value&gt;\n</code></pre> <p>Sets the DSCP field in the IP header for QoS marking.</p> <ul> <li>Range: 0-63</li> <li>Common values:<ul> <li><code>0</code> - Best Effort (default)</li> <li><code>8</code> - CS1 (Scavenger)</li> <li><code>10</code> - AF11</li> <li><code>18</code> - AF21</li> <li><code>26</code> - AF31</li> <li><code>34</code> - AF41</li> <li><code>46</code> - EF (Expedited Forwarding)</li> </ul> </li> </ul> <p>Example: <pre><code>twampy sender 192.168.1.100 --dscp ef\n</code></pre></p> <p>Use <code>twampy dscptable</code> to see all DSCP values.</p>"},{"location":"user-guide/configuration/#tos-type-of-service","title":"TOS (Type of Service)","text":"<pre><code>--tos &lt;value&gt;\n</code></pre> <p>Sets the TOS field directly (alternative to DSCP).</p> <ul> <li>Range: 0-255</li> <li>Note: On Windows, requires registry modification (see Installation Guide)</li> </ul> <p>Example: <pre><code>twampy sender 192.168.1.100 --tos 184\n</code></pre></p>"},{"location":"user-guide/configuration/#ttl-time-to-live","title":"TTL (Time to Live)","text":"<pre><code>--ttl &lt;value&gt;\n</code></pre> <p>Sets the TTL field in the IP header.</p> <ul> <li>Range: 1-255</li> <li>Default: System default (typically 64)</li> <li>Use case: Test routing paths, limit hop count</li> </ul> <p>Example: <pre><code>twampy sender 192.168.1.100 --ttl 32\n</code></pre></p>"},{"location":"user-guide/configuration/#padding","title":"Padding","text":"<pre><code>--padding &lt;bytes&gt;\n</code></pre> <p>Sets the packet payload size.</p> <ul> <li>Range: 27-9000</li> <li>Special value: <code>-1</code> for IMIX traffic</li> <li>Default: 27 bytes</li> </ul> <p>Packet size calculation:</p> IP Version Padding IP Packet Size Ethernet Frame Size IPv4 27 69 bytes 83 bytes IPv4 1000 1042 bytes 1056 bytes IPv6 27 89 bytes 103 bytes IPv6 1000 1062 bytes 1076 bytes <p>Example: <pre><code># Standard packet\ntwampy sender 192.168.1.100 --padding 100\n\n# Jumbo frame\ntwampy sender 192.168.1.100 --padding 8000\n\n# IMIX traffic\ntwampy sender 192.168.1.100 --padding -1\n</code></pre></p>"},{"location":"user-guide/configuration/#dont-fragment-flag","title":"Don't Fragment Flag","text":"<pre><code>--do-not-fragment\n</code></pre> <p>Sets the DF (Don't Fragment) bit in the IP header.</p> <ul> <li>Supported: Linux, Windows</li> <li>Not supported: macOS, FreeBSD</li> <li>Use case: MTU path discovery, fragmentation testing</li> </ul> <p>Example: <pre><code>twampy sender 192.168.1.100 --padding 1400 --do-not-fragment\n</code></pre></p>"},{"location":"user-guide/configuration/#test-session-options","title":"Test Session Options","text":"<p>Configure test session parameters (sender/controller modes):</p>"},{"location":"user-guide/configuration/#packet-count","title":"Packet Count","text":"<pre><code>--count &lt;packets&gt;, -c &lt;packets&gt;\n</code></pre> <p>Number of test packets to send.</p> <ul> <li>Range: 1-9999 (limited by implementation)</li> <li>Default: 100</li> <li>Use case: Control test duration</li> </ul> <p>Example: <pre><code>twampy sender 192.168.1.100 --count 1000\n</code></pre></p>"},{"location":"user-guide/configuration/#send-interval","title":"Send Interval","text":"<pre><code>--interval &lt;milliseconds&gt;, -i &lt;milliseconds&gt;\n</code></pre> <p>Time between consecutive packets.</p> <ul> <li>Range: 1-10000 milliseconds</li> <li>Default: 1000 ms (1 second)</li> <li>Note: Lower values = higher packet rate</li> </ul> <p>Packet rate examples:</p> Interval (ms) Packets/Second Use Case 1000 1 Basic monitoring 100 10 Standard testing 10 100 High-frequency testing 1 1000 Stress testing <p>Example: <pre><code># 10 packets per second\ntwampy sender 192.168.1.100 --interval 100 --count 600\n\n# 100 packets per second (high rate)\ntwampy sender 192.168.1.100 --interval 10 --count 6000\n</code></pre></p>"},{"location":"user-guide/configuration/#address-specification","title":"Address Specification","text":""},{"location":"user-guide/configuration/#format","title":"Format","text":"<p>Addresses can be specified in multiple formats:</p> <pre><code>[IP-address][:port]\n</code></pre>"},{"location":"user-guide/configuration/#ipv4-examples","title":"IPv4 Examples","text":"<pre><code># IP only (uses default port 862)\ntwampy sender 192.168.1.100\n\n# IP with port\ntwampy sender 192.168.1.100:20000\n\n# Port only (binds to all interfaces)\ntwampy responder :20000\n</code></pre>"},{"location":"user-guide/configuration/#ipv6-examples","title":"IPv6 Examples","text":"<pre><code># IPv6 only\ntwampy sender 2001:db8::1\n\n# IPv6 with port (brackets required)\ntwampy sender [2001:db8::1]:20000\n\n# IPv6 all interfaces\ntwampy responder [::]:20000\n</code></pre>"},{"location":"user-guide/configuration/#local-and-remote-addresses","title":"Local and Remote Addresses","text":"<p>Some commands accept both local and remote addresses:</p> <pre><code>twampy sender &lt;remote-address&gt; [local-address]\n</code></pre> <p>Example: <pre><code># Explicit source and destination\ntwampy sender 192.168.1.100:20000 192.168.1.200:30000\n\n# Use specific source IP\ntwampy sender 192.168.1.100:20000 192.168.1.200\n</code></pre></p>"},{"location":"user-guide/configuration/#configuration-examples","title":"Configuration Examples","text":""},{"location":"user-guide/configuration/#basic-latency-measurement","title":"Basic Latency Measurement","text":"<pre><code>twampy sender 192.168.1.100 --count 100 --interval 100\n</code></pre>"},{"location":"user-guide/configuration/#high-priority-traffic-ef","title":"High-Priority Traffic (EF)","text":"<pre><code>twampy sender 192.168.1.100 --dscp ef --count 1000 --interval 10\n</code></pre>"},{"location":"user-guide/configuration/#large-packet-testing","title":"Large Packet Testing","text":"<pre><code>twampy sender 192.168.1.100 --padding 1400 --do-not-fragment --count 500\n</code></pre>"},{"location":"user-guide/configuration/#imix-traffic-profile","title":"IMIX Traffic Profile","text":"<pre><code>twampy sender 192.168.1.100 --padding -1 --count 1200 --interval 10\n</code></pre>"},{"location":"user-guide/configuration/#ipv6-with-qos","title":"IPv6 with QoS","text":"<pre><code>twampy sender [2001:db8::1]:862 --dscp af41 --ttl 64 --count 1000\n</code></pre>"},{"location":"user-guide/configuration/#long-duration-test-with-logging","title":"Long-Duration Test with Logging","text":"<pre><code>twampy sender 192.168.1.100 \\\n  --count 36000 \\\n  --interval 100 \\\n  --dscp 46 \\\n  --logfile /var/log/twampy-test.log \\\n  --verbose\n</code></pre>"},{"location":"user-guide/configuration/#environment-considerations","title":"Environment Considerations","text":""},{"location":"user-guide/configuration/#software-timestamping-limitations","title":"Software Timestamping Limitations","text":"<p>twampy uses software timestamping, which has inherent limitations:</p> <ul> <li>Typical accuracy: 100\u03bcs - 2ms</li> <li>Factors affecting accuracy:<ul> <li>System load</li> <li>CPU scheduling</li> <li>Network stack processing</li> <li>Virtualization overhead</li> </ul> </li> </ul> <p>Recommendation: For sub-millisecond accuracy requirements, use hardware-based TWAMP implementations.</p>"},{"location":"user-guide/configuration/#platform-specific-considerations","title":"Platform-Specific Considerations","text":""},{"location":"user-guide/configuration/#linux","title":"Linux","text":"<ul> <li>Full feature support</li> <li>DF flag supported</li> <li>Recommended for production use</li> </ul>"},{"location":"user-guide/configuration/#windows","title":"Windows","text":"<ul> <li>Full feature support</li> <li>DF flag supported</li> <li>Requires registry modification for TOS/DSCP (see Installation Guide)</li> </ul>"},{"location":"user-guide/configuration/#macos-freebsd","title":"macOS / FreeBSD","text":"<ul> <li>Most features supported</li> <li>DF flag NOT supported</li> <li>Socket options may need platform-specific adjustments</li> </ul>"},{"location":"user-guide/configuration/#port-permissions","title":"Port Permissions","text":"<ul> <li>Ports &lt; 1024: Require root/administrator privileges</li> <li>Recommended: Use ports \u2265 1024 for non-privileged operation</li> </ul> <pre><code># Requires root\nsudo twampy responder :862\n\n# No root required\ntwampy responder :20862\n</code></pre>"},{"location":"user-guide/configuration/#best-practices","title":"Best Practices","text":""},{"location":"user-guide/configuration/#1-start-with-defaults","title":"1. Start with Defaults","text":"<p>Begin testing with default parameters:</p> <pre><code>twampy controller 192.168.1.100\n</code></pre>"},{"location":"user-guide/configuration/#2-gradually-increase-load","title":"2. Gradually Increase Load","text":"<p>Increase packet rate progressively:</p> <pre><code># Start: 1 packet/second\ntwampy sender 192.168.1.100 --interval 1000 --count 100\n\n# Medium: 10 packets/second\ntwampy sender 192.168.1.100 --interval 100 --count 1000\n\n# High: 100 packets/second\ntwampy sender 192.168.1.100 --interval 10 --count 6000\n</code></pre>"},{"location":"user-guide/configuration/#3-use-appropriate-packet-sizes","title":"3. Use Appropriate Packet Sizes","text":"<p>Choose packet sizes based on your test scenario:</p> <ul> <li>Small packets (64-100 bytes): PPS testing</li> <li>Medium packets (500-600 bytes): Typical traffic</li> <li>Large packets (1400-1500 bytes): Throughput testing</li> <li>IMIX: Realistic traffic mix</li> </ul>"},{"location":"user-guide/configuration/#4-enable-logging-for-diagnostics","title":"4. Enable Logging for Diagnostics","text":"<p>For troubleshooting, enable verbose logging:</p> <pre><code>twampy sender 192.168.1.100 --debug --logfile debug.log\n</code></pre>"},{"location":"user-guide/configuration/#5-use-dscp-for-qos-testing","title":"5. Use DSCP for QoS Testing","text":"<p>Test different traffic classes:</p> <pre><code># Voice (EF)\ntwampy sender 192.168.1.100 --dscp 46\n\n# Video (AF41)\ntwampy sender 192.168.1.100 --dscp 34\n\n# Best Effort\ntwampy sender 192.168.1.100 --dscp 0\n</code></pre>"},{"location":"user-guide/configuration/#next-steps","title":"Next Steps","text":"<ul> <li>Return to Usage Guide for practical examples</li> <li>See Error Codes Reference</li> <li>See DSCP Table Reference</li> </ul>"},{"location":"user-guide/installation/","title":"Installation","text":"<p>This guide covers how to install and uninstall twampy on your system.</p>"},{"location":"user-guide/installation/#requirements","title":"Requirements","text":"<ul> <li>Python 3.11 or higher</li> <li>No external dependencies - twampy uses only Python standard library modules</li> </ul>"},{"location":"user-guide/installation/#installation-methods","title":"Installation Methods","text":""},{"location":"user-guide/installation/#method-1-install-from-source-recommended-for-development","title":"Method 1: Install from Source (Recommended for Development)","text":"<p>Clone the repository and install in editable mode:</p> <pre><code># Clone the repository\ngit clone https://github.com/nokia/twampy\ncd twampy\n\n# Install in editable mode\npip install -e .\n</code></pre> <p>After installation, the <code>twampy</code> command will be available:</p> <pre><code>twampy --version\n</code></pre>"},{"location":"user-guide/installation/#method-2-install-from-source-standard","title":"Method 2: Install from Source (Standard)","text":"<p>Clone and install as a regular package:</p> <pre><code># Clone the repository\ngit clone https://github.com/nokia/twampy\ncd twampy\n\n# Install the package\npip install .\n</code></pre>"},{"location":"user-guide/installation/#method-3-direct-execution-no-installation","title":"Method 3: Direct Execution (No Installation)","text":"<p>You can run twampy directly without installation:</p> <pre><code># Clone the repository\ngit clone https://github.com/nokia/twampy\ncd twampy\n\n# Run as a module\npython -m twampy --help\n</code></pre>"},{"location":"user-guide/installation/#method-4-install-from-pypi-future","title":"Method 4: Install from PyPI (Future)","text":"<p>Note</p> <p>Once published to PyPI, you'll be able to install with: <pre><code>pip install twampy\n</code></pre></p>"},{"location":"user-guide/installation/#verify-installation","title":"Verify Installation","text":"<p>After installation, verify twampy is working:</p> <pre><code># Check version\ntwampy --version\n\n# Or if running as module\npython -m twampy --version\n</code></pre> <p>You should see output similar to: <pre><code>twampy 1.0\n</code></pre></p>"},{"location":"user-guide/installation/#virtual-environment-recommended","title":"Virtual Environment (Recommended)","text":"<p>It's recommended to install twampy in a virtual environment:</p> <pre><code># Create a virtual environment\npython -m venv venv\n\n# Activate the virtual environment\n# On Linux/macOS:\nsource venv/bin/activate\n# On Windows:\nvenv\\Scripts\\activate\n\n# Install twampy\npip install -e .\n</code></pre>"},{"location":"user-guide/installation/#uninstallation","title":"Uninstallation","text":"<p>To uninstall twampy:</p> <pre><code>pip uninstall twampy\n</code></pre> <p>To remove all files including the source:</p> <pre><code># Uninstall the package\npip uninstall twampy\n\n# Remove the cloned repository\ncd ..\nrm -rf twampy\n</code></pre>"},{"location":"user-guide/installation/#platform-specific-notes","title":"Platform-Specific Notes","text":""},{"location":"user-guide/installation/#linux","title":"Linux","text":"<p>No special requirements. All features are supported.</p>"},{"location":"user-guide/installation/#windows","title":"Windows","text":"<p>To use DSCP/TOS field settings, you need to enable user TOS settings:</p> <ol> <li>Open Registry Editor (<code>regedit</code>)</li> <li>Navigate to: <code>HKEY_LOCAL_MACHINE\\SYSTEM\\CurrentControlSet\\Services\\TcpIp\\Parameters</code></li> <li>Create a new DWORD value named <code>DisableUserTOSSetting</code> with value <code>0x00000000</code> (0)</li> <li>Restart your computer</li> </ol> <p>Reference: Microsoft KB248611</p>"},{"location":"user-guide/installation/#macos-freebsd","title":"macOS / FreeBSD","text":"<p>Limited DF Flag Support</p> <p>The DF (Don't Fragment) flag is not currently supported on macOS and FreeBSD. All other features work normally.</p>"},{"location":"user-guide/installation/#development-installation","title":"Development Installation","text":"<p>For development work, install additional tools:</p> <pre><code># Clone the repository\ngit clone https://github.com/nokia/twampy\ncd twampy\n\n# Create virtual environment\npython -m venv venv\nsource venv/bin/activate  # or venv\\Scripts\\activate on Windows\n\n# Install in editable mode with dev dependencies\npip install -e \".[dev]\"\n</code></pre>"},{"location":"user-guide/installation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/installation/#permission-errors","title":"Permission Errors","text":"<p>If you encounter permission errors during installation:</p> <pre><code># Install for current user only\npip install --user -e .\n</code></pre>"},{"location":"user-guide/installation/#port-access-862","title":"Port Access (862)","text":"<p>TWAMP uses UDP port 862 by default. On Linux/macOS, you may need elevated privileges:</p> <pre><code># Run with sudo for port 862\nsudo twampy responder\n\n# Or use a non-privileged port (&gt;1024)\ntwampy responder :20862\n</code></pre>"},{"location":"user-guide/installation/#python-version-issues","title":"Python Version Issues","text":"<p>Verify your Python version:</p> <pre><code>python --version\n# Should show Python 3.11 or higher\n</code></pre> <p>If you have multiple Python versions installed:</p> <pre><code># Use specific Python version\npython3.11 -m pip install -e .\npython3.11 -m twampy --version\n</code></pre>"},{"location":"user-guide/installation/#next-steps","title":"Next Steps","text":"<p>Once installed, proceed to the Usage Guide to learn how to use twampy.</p>"},{"location":"user-guide/usage/","title":"Usage Guide","text":"<p>This guide covers how to use twampy for network latency measurement.</p>"},{"location":"user-guide/usage/#basic-command-structure","title":"Basic Command Structure","text":"<p>After installation, run twampy using one of these methods:</p> <pre><code># If installed via pip\ntwampy [command] [options]\n\n# Or run as a Python module\npython -m twampy [command] [options]\n</code></pre>"},{"location":"user-guide/usage/#available-commands","title":"Available Commands","text":"<p>twampy supports multiple modes of operation:</p> Command Description <code>controller</code> TWAMP controller (control client + session sender) <code>controlclient</code> TWAMP control client only <code>sender</code> TWAMP light session sender <code>responder</code> TWAMP light reflector <code>dscptable</code> Display DSCP/TOS values table"},{"location":"user-guide/usage/#getting-help","title":"Getting Help","text":"<p>Display general help:</p> <pre><code>twampy --help\n</code></pre> <p>Display help for a specific command:</p> <pre><code>twampy sender --help\ntwampy controller --help\ntwampy responder --help\n</code></pre>"},{"location":"user-guide/usage/#command-examples","title":"Command Examples","text":""},{"location":"user-guide/usage/#1-twamp-controller","title":"1. TWAMP Controller","text":"<p>Connect to a TWAMP server and run a complete test session:</p> <pre><code># Basic usage\ntwampy controller 192.168.1.100\n\n# With custom port\ntwampy controller 192.168.1.100:862\n\n# IPv6 address\ntwampy controller [2001:db8::1]:862\n\n# With options\ntwampy controller 192.168.1.100 --count 100 --interval 100 --dscp ef\n</code></pre> <p>Example output: <pre><code>===============================================================================\nDirection         Min         Max         Avg          Jitter     Loss\n-------------------------------------------------------------------------------\n  Outbound:       92.89ms    196.63ms     95.15ms       576us      0.0%\n  Inbound:            0us         0us         0us         0us      0.0%\n  Roundtrip:        339us    103.53ms      1.91ms       638us      0.0%\n-------------------------------------------------------------------------------\n                                                    Jitter Algorithm [RFC1889]\n===============================================================================\n</code></pre></p>"},{"location":"user-guide/usage/#2-twamp-light-sender","title":"2. TWAMP Light Sender","text":"<p>Send test packets directly to a reflector:</p> <pre><code># Basic usage\ntwampy sender 192.168.1.200:20000\n\n# Specify local and remote addresses\ntwampy sender 192.168.1.200:20000 192.168.1.100:20001\n\n# With DSCP marking\ntwampy sender 192.168.1.200:20000 --dscp ef\n\n# With specific packet count and interval\ntwampy sender 192.168.1.200:20000 --count 1000 --interval 100\n</code></pre>"},{"location":"user-guide/usage/#3-twamp-light-reflector","title":"3. TWAMP Light Reflector","text":"<p>Start a reflector (server) listening for test packets:</p> <pre><code># Listen on default port 862 (requires root/sudo)\nsudo twampy responder\n\n# Listen on specific port\ntwampy responder :20000\n\n# Listen on specific IP and port\ntwampy responder 192.168.1.100:20000\n\n# IPv6\ntwampy responder [::]:20000\n</code></pre>"},{"location":"user-guide/usage/#4-dscp-table","title":"4. DSCP Table","text":"<p>Display DSCP values and their meanings:</p> <pre><code>twampy dscptable\n</code></pre>"},{"location":"user-guide/usage/#common-options","title":"Common Options","text":""},{"location":"user-guide/usage/#logging-options","title":"Logging Options","text":"<pre><code># Quiet mode (minimal output)\ntwampy sender 192.168.1.100 --quiet\n\n# Verbose mode (detailed output)\ntwampy sender 192.168.1.100 --verbose\n\n# Debug mode (extensive logging)\ntwampy sender 192.168.1.100 --debug\n\n# Log to file\ntwampy sender 192.168.1.100 --logfile /var/log/twampy.log\n</code></pre>"},{"location":"user-guide/usage/#ip-socket-options","title":"IP Socket Options","text":"<pre><code># Set DSCP value (Differentiated Services Code Point)\ntwampy sender 192.168.1.100 --dscp ef\n\n# Set TOS value (Type of Service)\ntwampy sender 192.168.1.100 --tos 184\n\n# Set TTL value (Time to Live)\ntwampy sender 192.168.1.100 --ttl 64\n\n# Set padding (packet size)\ntwampy sender 192.168.1.100 --padding 1000\n\n# Enable Don't Fragment flag\ntwampy sender 192.168.1.100 --do-not-fragment\n</code></pre>"},{"location":"user-guide/usage/#test-session-options","title":"Test Session Options","text":"<pre><code># Number of packets to send\ntwampy sender 192.168.1.100 --count 1000\n\n# Interval between packets (milliseconds)\ntwampy sender 192.168.1.100 --interval 100\n</code></pre>"},{"location":"user-guide/usage/#packet-sizing","title":"Packet Sizing","text":"<p>Use padding to control packet and frame sizes:</p>"},{"location":"user-guide/usage/#standard-padding","title":"Standard Padding","text":"IP Version Padding Packet Size Frame Size IPv4 \u226527 Padding+42 Padding+56 IPv6 \u226527 Padding+62 Padding+76 <p>Default padding is 27 bytes (enforces bidirectional behavior).</p> <p>Example: <pre><code># 100-byte packets\ntwampy sender 192.168.1.100 --padding 58\n\n# Jumbo frame (1500 bytes)\ntwampy sender 192.168.1.100 --padding 1444\n</code></pre></p>"},{"location":"user-guide/usage/#imix-traffic","title":"IMIX Traffic","text":"<p>Use <code>--padding -1</code> to generate IMIX (Internet Mix) traffic:</p> L2 Size Packets Ratio (Packets) Ratio (Volume) 64 7 58% 10% 590 4 33% 55% 1514 1 8% 35% <p>Example: <pre><code>twampy sender 192.168.1.100 --padding -1 --count 1200\n</code></pre></p>"},{"location":"user-guide/usage/#usage-scenarios","title":"Usage Scenarios","text":""},{"location":"user-guide/usage/#basic-latency-test","title":"Basic Latency Test","text":"<p>Quick test between two hosts:</p> <pre><code># On reflector host (192.168.1.200)\ntwampy responder :20000\n\n# On sender host\ntwampy sender 192.168.1.200:20000 --count 100\n</code></pre>"},{"location":"user-guide/usage/#qos-testing","title":"QoS Testing","text":"<p>Test with different DSCP markings:</p> <pre><code># EF (Expedited Forwarding) - DSCP 46\ntwampy sender 192.168.1.100 --dscp ef --count 1000\n\n# AF41 (Assured Forwarding) - DSCP 34\ntwampy sender 192.168.1.100 --dscp af41 --count 1000\n\n# Best Effort - DSCP 0\ntwampy sender 192.168.1.100 --dscp be --count 1000\n</code></pre>"},{"location":"user-guide/usage/#high-frequency-testing","title":"High-Frequency Testing","text":"<p>Send packets at high rate:</p> <pre><code># 10ms interval (100 packets/second)\ntwampy sender 192.168.1.100 --interval 10 --count 6000\n\n# 1ms interval (1000 packets/second)\ntwampy sender 192.168.1.100 --interval 1 --count 60000\n</code></pre>"},{"location":"user-guide/usage/#testing-against-nokia-sr-os","title":"Testing Against Nokia SR OS","text":"<p>Configure Nokia SR OS TWAMP server:</p> <pre><code>configure test-oam\n    twamp\n        server\n            prefix 0.0.0.0/0 create\n            exit\n            no shutdown\n        exit\n    exit\n</code></pre> <p>Run test from twampy:</p> <pre><code>twampy controller 192.168.255.2\n</code></pre>"},{"location":"user-guide/usage/#understanding-results","title":"Understanding Results","text":""},{"location":"user-guide/usage/#output-metrics","title":"Output Metrics","text":"<ul> <li>Min/Max/Avg: Minimum, maximum, and average latency</li> <li>Jitter: Packet delay variation (RFC 1889 algorithm)</li> <li>Loss: Percentage of packets lost</li> </ul>"},{"location":"user-guide/usage/#directions","title":"Directions","text":"<ul> <li>Outbound: Sender \u2192 Reflector</li> <li>Inbound: Reflector \u2192 Sender</li> <li>Roundtrip: Full round-trip time</li> </ul>"},{"location":"user-guide/usage/#advanced-usage","title":"Advanced Usage","text":""},{"location":"user-guide/usage/#ipv6-testing","title":"IPv6 Testing","text":"<pre><code># IPv6 reflector\ntwampy responder [2001:db8::1]:20000\n\n# IPv6 sender\ntwampy sender [2001:db8::2]:20000 [2001:db8::1]:20001\n</code></pre>"},{"location":"user-guide/usage/#custom-port-ranges","title":"Custom Port Ranges","text":"<pre><code># Reflector on custom port\ntwampy responder :30000\n\n# Sender with custom source and destination ports\ntwampy sender 192.168.1.100:30000 192.168.1.200:30001\n</code></pre>"},{"location":"user-guide/usage/#long-running-tests","title":"Long-Running Tests","text":"<pre><code># Run for 1 hour (100ms interval, 36000 packets)\ntwampy sender 192.168.1.100 --interval 100 --count 36000 --logfile test.log\n\n# Monitor continuously (high packet count)\ntwampy sender 192.168.1.100 --interval 1000 --count 999999\n</code></pre>"},{"location":"user-guide/usage/#troubleshooting","title":"Troubleshooting","text":""},{"location":"user-guide/usage/#port-already-in-use","title":"Port Already in Use","text":"<p>If port 862 is already in use:</p> <pre><code># Use a different port\ntwampy responder :20862\n</code></pre>"},{"location":"user-guide/usage/#permission-denied","title":"Permission Denied","text":"<p>For ports &lt; 1024, use sudo:</p> <pre><code>sudo twampy responder :862\n</code></pre>"},{"location":"user-guide/usage/#no-response-from-reflector","title":"No Response from Reflector","text":"<p>Check connectivity:</p> <pre><code># Verify network connectivity\nping 192.168.1.100\n\n# Check if reflector is running\nsudo netstat -ulnp | grep 862\n</code></pre>"},{"location":"user-guide/usage/#high-latency-values","title":"High Latency Values","text":"<p>Remember that twampy uses software timestamping, which is less precise than hardware timestamping. Expected accuracy:</p> <ul> <li>Typical software timestamping accuracy: ~100\u03bcs - 2ms</li> <li>Hardware timestamping accuracy: ~10ns - 100ns</li> </ul>"},{"location":"user-guide/usage/#next-steps","title":"Next Steps","text":"<ul> <li>See Configuration Guide for detailed parameter descriptions</li> <li>See Error Codes Reference for error code meanings</li> <li>See DSCP Table Reference for QoS values</li> </ul>"}]}